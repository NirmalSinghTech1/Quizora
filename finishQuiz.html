<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizora - A Quiz app</title>

    <!-- Link CSS -->
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <main>
        <div class="finish-quiz-container">
            <div class="finish-quiz-header">
                <p>Total Score: </p>
                <p class="score">0</p>
                <p>Enter your name below to save your score!</p>
            </div>
            <div class="form-container">
                <form action="" class="user-name-form">
                    <input type="text" placeholder="Enter your name" required autocomplete="off">
                    <input type="submit" value="Save" class="save-button">
                </form>
                <a href="./quiz.html" class="play-again-button">Play again</a>
                <a href="/" class="go-home-button">
                    Go Home
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#3a6073"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
                </a>
            </div>
        </div>
    </main>
    <script>
        const getScore = JSON.parse(sessionStorage.getItem('score')) || 0
        const scoreEl = document.querySelector('.score')
        const userNameForm = document.querySelector('.user-name-form')
        const username = document.querySelector('input[type=text]')
        scoreEl.innerText = getScore

        let users = JSON.parse(sessionStorage.getItem('users')) || []
        // console.log("user", user)
        userNameForm.addEventListener('submit', (e) => {
            e.preventDefault()

            let user = {
                    username: username.value,
                    score: getScore
                }

            console.log("users",users)
            users.push(user)
            sessionStorage.setItem('users', JSON.stringify(users))

            userNameForm.reset()
            window.location.assign('leaderboard.html')
        })
    </script>
</body>
</html>